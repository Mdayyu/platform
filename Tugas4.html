<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tugas 4 - JavaScript</title>
    <style>
        body {
            font-family: Arial, sans-serif;
        }

        header {
            background-color: #333;
            color: #fff;
            padding: 20px;
            text-align: center;
        }

        form {
            max-width: 400px;
            margin: 20px auto;
            padding: 20px;
            border: 1px solid #ccc;
            border-radius: 5px;
            background-color: #f9f9f9;
        }

        label {
            display: block;
            margin-bottom: 10px;
            font-weight: bold;
        }

        input[type="text"],
        input[type="number"] {
            width: calc(100% - 22px);
            padding: 8px;
            margin-bottom: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        .option {
            width: calc(100% - 22px);
            padding: 8px;
            margin-bottom: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        button {
            padding: 10px 20px;
            background-color: #333;
            color: #fff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        .error {
            color: red;
            margin-top: 5px;
        }
        .foto-placeholder {
            width: 100px; 
            height: 100px; 
            border-radius: 50%; 
            overflow: hidden; 
            margin-top: 10px; 
        }

        .foto-placeholder img {
            width: 100%;
            height: auto; 
        }

    </style>
</head>
<body>
    <header>
        <h1>Selamat Datang</h1>
        <p>Ni Made Ayu Sukmawardani</p>
        <p>225314021</p>
        <div class="foto-placeholder">
            <img src="https://i.pinimg.com/564x/90/08/81/90088133f93e1c77b70e38d255e70a05.jpg" alt="Foto Anda">
        </div>
        
    </header>
    

    <form id="inputForm" onsubmit="return false;">
        <label for="nama">Nama:</label>
        <input type="text" id="nama" required>
        <div id="nameError" class="error"></div>

        <label for="jumlah">Jumlah Pilihan:</label>
        <input type="number" id="jumlah" min="1" required>
        <div id="quantityError" class="error"></div>

        <button onclick="generateOptions()">OK</button>
    </form>
    <div id="errorMessages" class="error"></div>
    <div id="tampilanInputs"></div>
    

    <div id="finalOutput"></div>

    <script>
        var data = [];
        var radio = [];
        var pilihanElement;

        function generateOptions() {
            var nama = document.getElementById("nama").value;
            var jumlah = parseInt(document.getElementById("jumlah").value);
            var nameError = document.getElementById("nameError");
            var quantityError = document.getElementById("quantityError");
            var tampilanInputs = document.getElementById("tampilanInputs");

            
            // Validasi input nama tidak kosong
            if (nama.trim() === "") {
                nameError.textContent = "Nama tidak boleh kosong";
                return;
            } else if (!/^[a-zA-Z\s]+$/.test(nama)) {
                nameError.textContent = "Nama hanya boleh berisi huruf";
                return;
            } else {
                nameError.textContent = "";
            }

            // Validasi jumlah pilihan lebih besar dari 0
            if (jumlah <= 0 || isNaN(jumlah)) {
                quantityError.textContent = "Jumlah pilihan harus lebih besar dari 0";
                return;
            } else {
                quantityError.textContent = "";
            }

            // Validasi setiap pilihan tidak kosong
            var inputs = tampilanInputs.querySelectorAll('input[type="text"]');
            for (var i = 0; i < inputs.length; i++) {
                if (inputs[i].value.trim() === "") {
                    alert("Pilihan " + (i + 1) + " tidak boleh kosong");
                    return;
                }
            }
            tampilanInputs.innerHTML = "";


            var input = [];
            for (var i = 1; i <= jumlah; i++) {
                var label = document.createElement("label");
                label.textContent = "Pilihan " + i + ":";
                input[i - 1] = document.createElement("input");
                input[i - 1].type = "text";
                input[i - 1].name = "teksTampilan" + i;

                tampilanInputs.appendChild(label);
                tampilanInputs.appendChild(input[i - 1]);
                tampilanInputs.appendChild(document.createElement("br"));
            }

            var button = document.createElement("button");
            button.type = "button";
            button.id = "buttonOK";
            button.textContent = "OK";

            tampilanInputs.appendChild(button);
            tampilanInputs.appendChild(document.createElement("br"));
            tampilanInputs.appendChild(document.createElement("br"));

            document.getElementById("buttonOK").addEventListener("click", function (e) {
            var errorMessages = document.getElementById("errorMessages");
            errorMessages.innerHTML = ""; // Kosongkan pesan kesalahan sebelum validasi

            // Validasi setiap input pilihan tidak kosong
            for (var i = 0; i < input.length; i++) {
                if (input[i].value.trim() === "") {
                    var errorMessage = document.createElement("div");
                    errorMessage.textContent = "Pilihan " + (i + 1) + " tidak boleh kosong. Silakan isi kembali.";
                    errorMessages.appendChild(errorMessage);
                    return;
                }
            }

            // Jika semua input pilihan diisi, lanjutkan dengan membuat radio button
            for (var i = 1; i <= jumlah; i++) {
                data[i - 1] = input[i - 1].value;
            }

                generateRadio();
                this.remove();
            });
        }

        function generateRadio() {
            var jumlah = parseInt(document.getElementById("jumlah").value);
            var tampilanInputs = document.getElementById("tampilanInputs");
            var label;

            // Label untuk teks di atas pilihan
            var labelText = document.createElement("label");
            labelText.textContent = "Pilihlah Salah Satu: ";
            tampilanInputs.appendChild(labelText);

            for (var i = 0; i < data.length; i++) {
                // Label untuk setiap pilihan
                label = document.createElement("label");

                var radioInput = document.createElement("input");
                radioInput.type = "radio";
                radioInput.name = "teksTampilan";
                radioInput.id = "Radio" + (i + 1);
                label.appendChild(radioInput);

                
                var spanOption = document.createElement("span");
                spanOption.textContent = data[i];
                label.appendChild(spanOption);

                label.setAttribute("for", "Radio" + (i + 1));
                tampilanInputs.appendChild(label);
            }



            for (var i = data.length + 1; i <= jumlah; i++) {
                label = document.createElement("label");
                label.textContent = "Pilihan " + i + ": " + data[i - 1]; 
                tampilanInputs.appendChild(label);

                label = document.createElement("label");
                label.innerHTML = '<input type="radio" name="teksTampilan" id="Radio' + i + '">' + data[i - 1];
                label.setAttribute("for", "Radio" + i);
                tampilanInputs.appendChild(label);
            }

            radio = [];
            for (var i = 1; i <= jumlah; i++) {
                radio.push(document.getElementById("Radio" + i));
                radio[i - 1].addEventListener("click", function (e) {
                    var radios = document.getElementsByName(this.name);

                    radios.forEach(function (x) {
                        x.checked = false;
                    });

                    this.checked = true;
                });
            }

            var button = document.createElement("button");
            button.name = "buttonLast";
            button.textContent = "OK";
            button.id = "buttonLast";
            tampilanInputs.appendChild(button);
            tampilanInputs.appendChild(document.createElement("br"));

            document.getElementById("buttonLast").addEventListener("click", function (e) {
                showResult();
                this.remove();
            });
        }

        function showResult() {
            var nama = document.getElementById("nama").value;
            var jumlah = document.getElementById("jumlah").value;
            var finalOutput = document.getElementById("finalOutput");
            var pilihanTexts = document.getElementsByName("teksTampilan");
            var selectedOption;

            for (var i = 0; i < pilihanTexts.length; i++) {
                if (pilihanTexts[i].checked) {
                    selectedOption = pilihanTexts[i].nextSibling.textContent;
                    break;
                }
            }

            finalOutput.innerHTML = "Hallo, nama saya " + nama + ", saya mempunyai sejumlah " + jumlah + " pilihan yaitu: ";

            var pilihanList = [];
            for (var i = 0; i < data.length; i++) {
                pilihanList.push(data[i]);
            }

            if (pilihanList.length > 0) {
                finalOutput.innerHTML += pilihanList.join(", ");
            }

            finalOutput.innerHTML += ", dan saya memilih " + selectedOption + ".";
        }
</script>
</body>
</html>